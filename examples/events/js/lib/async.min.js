/*
	version 0.2.6
	https://github.com/caolan/async
*/
(function(){function v(b){var a=!1;return function(){if(a)throw Error("Callback was already called.");a=!0;b.apply(m,arguments)}}var d={},m,w;m=this;null!=m&&(w=m.async);d.noConflict=function(){m.async=w;return d};var l=function(b,a){if(b.forEach)return b.forEach(a);for(var c=0;c<b.length;c+=1)a(b[c],c,b)},k=function(b,a){if(b.map)return b.map(a);var c=[];l(b,function(e,b,j){c.push(a(e,b,j))});return c},r=function(b){if(Object.keys)return Object.keys(b);var a=[],c;for(c in b)b.hasOwnProperty(c)&&
a.push(c);return a};"undefined"===typeof process||!process.nextTick?"function"===typeof setImmediate?(d.setImmediate=setImmediate,d.nextTick=setImmediate):(d.setImmediate=d.nextTick,d.nextTick=function(b){setTimeout(b,0)}):(d.nextTick=process.nextTick,d.setImmediate=setImmediate);d.each=function(b,a,c){c=c||function(){};if(!b.length)return c();var e=0;l(b,function(f){a(f,v(function(a){a?(c(a),c=function(){}):(e+=1,e>=b.length&&c(null))}))})};d.forEach=d.each;d.eachSeries=function(b,a,c){c=c||function(){};
if(!b.length)return c();var e=0,f=function(){a(b[e],function(a){a?(c(a),c=function(){}):(e+=1,e>=b.length?c(null):f())})};f()};d.forEachSeries=d.eachSeries;d.eachLimit=function(b,a,c,e){u(a).apply(null,[b,c,e])};d.forEachLimit=d.eachLimit;var u=function(b){return function(a,c,e){e=e||function(){};if(!a.length||0>=b)return e();var f=0,j=0,d=0;(function s(){if(f>=a.length)return e();for(;d<b&&j<a.length;)j+=1,d+=1,c(a[j-1],function(b){b?(e(b),e=function(){}):(f+=1,d-=1,f>=a.length?e():s())})})()}},
p=function(b){return function(){var a=Array.prototype.slice.call(arguments);return b.apply(null,[d.each].concat(a))}},x=function(b,a){return function(){var c=Array.prototype.slice.call(arguments);return a.apply(null,[u(b)].concat(c))}},q=function(b){return function(){var a=Array.prototype.slice.call(arguments);return b.apply(null,[d.eachSeries].concat(a))}},t=function(b,a,c,e){var f=[];a=k(a,function(a,b){return{index:b,value:a}});b(a,function(a,b){c(a.value,function(e,c){f[a.index]=c;b(e)})},function(a){e(a,
f)})};d.map=p(t);d.mapSeries=q(t);d.mapLimit=function(b,a,c,e){return x(a,t)(b,c,e)};d.reduce=function(b,a,c,e){d.eachSeries(b,function(b,e){c(a,b,function(b,c){a=c;e(b)})},function(b){e(b,a)})};d.inject=d.reduce;d.foldl=d.reduce;d.reduceRight=function(b,a,c,e){b=k(b,function(a){return a}).reverse();d.reduce(b,a,c,e)};d.foldr=d.reduceRight;var g=function(b,a,c,e){var d=[];a=k(a,function(a,b){return{index:b,value:a}});b(a,function(a,b){c(a.value,function(e){e&&d.push(a);b()})},function(){e(k(d.sort(function(a,
b){return a.index-b.index}),function(a){return a.value}))})};d.filter=p(g);d.filterSeries=q(g);d.select=d.filter;d.selectSeries=d.filterSeries;g=function(b,a,c,e){var d=[];a=k(a,function(a,b){return{index:b,value:a}});b(a,function(a,b){c(a.value,function(e){e||d.push(a);b()})},function(){e(k(d.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};d.reject=p(g);d.rejectSeries=q(g);g=function(b,a,c,e){b(a,function(a,b){c(a,function(c){c?(e(a),e=function(){}):b()})},function(){e()})};
d.detect=p(g);d.detectSeries=q(g);d.some=function(b,a,c){d.each(b,function(b,d){a(b,function(a){a&&(c(!0),c=function(){});d()})},function(){c(!1)})};d.any=d.some;d.every=function(b,a,c){d.each(b,function(b,d){a(b,function(a){a||(c(!1),c=function(){});d()})},function(){c(!0)})};d.all=d.every;d.sortBy=function(b,a,c){d.map(b,function(b,c){a(b,function(a,d){a?c(a):c(null,{value:b,criteria:d})})},function(a,b){if(a)return c(a);c(null,k(b.sort(function(a,b){var c=a.criteria,e=b.criteria;return c<e?-1:
c>e?1:0}),function(a){return a.value}))})};d.auto=function(b,a){a=a||function(){};var c=r(b);if(!c.length)return a(null);var e={},f=[],j=function(){l(f.slice(0),function(a){a()})};f.unshift(function(){r(e).length===c.length&&(a(null,e),a=function(){})});l(c,function(c){var h=b[c]instanceof Function?[b[c]]:b[c],s=function(b){var f=Array.prototype.slice.call(arguments,1);1>=f.length&&(f=f[0]);if(b){var h={};l(r(e),function(a){h[a]=e[a]});h[c]=f;a(b,h);a=function(){}}else e[c]=f,d.setImmediate(j)},g=
h.slice(0,Math.abs(h.length-1))||[],k=function(){var a;var b=function(a,b){return a&&e.hasOwnProperty(b)},d=!0;g.reduce?a=g.reduce(b,d):(l(g,function(a,c,e){d=b(d,a,c,e)}),a=d);return a&&!e.hasOwnProperty(c)};if(k())h[h.length-1](s,e);else{var m=function(){if(k()){a:for(var a=m,b=0;b<f.length;b+=1)if(f[b]===a){f.splice(b,1);break a}h[h.length-1](s,e)}};f.unshift(m)}})};d.waterfall=function(b,a){a=a||function(){};if(b.constructor!==Array)return a(Error("First argument to waterfall must be an array of functions"));
if(!b.length)return a();var c=function(b){return function(f){if(f)a.apply(null,arguments),a=function(){};else{var j=Array.prototype.slice.call(arguments,1),n=b.next();n?j.push(c(n)):j.push(a);d.setImmediate(function(){b.apply(null,j)})}}};c(d.iterator(b))()};var y=function(b,a,c){c=c||function(){};if(a.constructor===Array)b.map(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);1>=c.length&&(c=c[0]);b.call(null,a,c)})},c);else{var e={};b.each(r(a),function(b,c){a[b](function(a){var d=
Array.prototype.slice.call(arguments,1);1>=d.length&&(d=d[0]);e[b]=d;c(a)})},function(a){c(a,e)})}};d.parallel=function(b,a){y({map:d.map,each:d.each},b,a)};d.parallelLimit=function(b,a,c){y({map:x(a,t),each:u(a)},b,c)};d.series=function(b,a){a=a||function(){};if(b.constructor===Array)d.mapSeries(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);1>=c.length&&(c=c[0]);b.call(null,a,c)})},a);else{var c={};d.eachSeries(r(b),function(a,d){b[a](function(b){var n=Array.prototype.slice.call(arguments,
1);1>=n.length&&(n=n[0]);c[a]=n;d(b)})},function(b){a(b,c)})}};d.iterator=function(b){var a=function(c){var d=function(){b.length&&b[c].apply(null,arguments);return d.next()};d.next=function(){return c<b.length-1?a(c+1):null};return d};return a(0)};d.apply=function(b){var a=Array.prototype.slice.call(arguments,1);return function(){return b.apply(null,a.concat(Array.prototype.slice.call(arguments)))}};g=function(b,a,c,d){var f=[];b(a,function(a,b){c(a,function(a,c){f=f.concat(c||[]);b(a)})},function(a){d(a,
f)})};d.concat=p(g);d.concatSeries=q(g);d.whilst=function(b,a,c){b()?a(function(e){if(e)return c(e);d.whilst(b,a,c)}):c()};d.doWhilst=function(b,a,c){b(function(e){if(e)return c(e);a()?d.doWhilst(b,a,c):c()})};d.until=function(b,a,c){b()?c():a(function(e){if(e)return c(e);d.until(b,a,c)})};d.doUntil=function(b,a,c){b(function(e){if(e)return c(e);a()?c():d.doUntil(b,a,c)})};d.queue=function(b,a){function c(b,c,e,f){c.constructor!==Array&&(c=[c]);l(c,function(c){c={data:c,callback:"function"===typeof f?
f:null};e?b.tasks.unshift(c):b.tasks.push(c);b.saturated&&b.tasks.length===a&&b.saturated();d.setImmediate(b.process)})}void 0===a&&(a=1);var e=0,f={tasks:[],concurrency:a,saturated:null,empty:null,drain:null,push:function(a,b){c(f,a,!1,b)},unshift:function(a,b){c(f,a,!0,b)},process:function(){if(e<f.concurrency&&f.tasks.length){var a=f.tasks.shift();f.empty&&0===f.tasks.length&&f.empty();e+=1;var c=v(function(){e-=1;a.callback&&a.callback.apply(a,arguments);f.drain&&0===f.tasks.length+e&&f.drain();
f.process()});b(a.data,c)}},length:function(){return f.tasks.length},running:function(){return e}};return f};d.cargo=function(b,a){var c=!1,e=[],f={tasks:e,payload:a,saturated:null,empty:null,drain:null,push:function(b,c){b.constructor!==Array&&(b=[b]);l(b,function(b){e.push({data:b,callback:"function"===typeof c?c:null});f.saturated&&e.length===a&&f.saturated()});d.setImmediate(f.process)},process:function n(){if(!c)if(0===e.length)f.drain&&f.drain();else{var d="number"===typeof a?e.splice(0,a):
e.splice(0),g=k(d,function(a){return a.data});f.empty&&f.empty();c=!0;b(g,function(){c=!1;var a=arguments;l(d,function(b){b.callback&&b.callback.apply(null,a)});n()})}},length:function(){return e.length},running:function(){return c}};return f};g=function(b){return function(a){var c=Array.prototype.slice.call(arguments,1);a.apply(null,c.concat([function(a){var c=Array.prototype.slice.call(arguments,1);"undefined"!==typeof console&&(a?console.error&&console.error(a):console[b]&&l(c,function(a){console[b](a)}))}]))}};
d.log=g("log");d.dir=g("dir");d.memoize=function(b,a){var c={},d={};a=a||function(a){return a};var f=function(){var f=Array.prototype.slice.call(arguments),g=f.pop(),h=a.apply(null,f);h in c?g.apply(null,c[h]):h in d?d[h].push(g):(d[h]=[g],b.apply(null,f.concat([function(){c[h]=arguments;var a=d[h];delete d[h];for(var b=0,f=a.length;b<f;b++)a[b].apply(null,arguments)}])))};f.memo=c;f.unmemoized=b;return f};d.unmemoize=function(b){return function(){return(b.unmemoized||b).apply(null,arguments)}};d.times=
function(b,a,c){for(var e=[],f=0;f<b;f++)e.push(f);return d.map(e,a,c)};d.timesSeries=function(b,a,c){for(var e=[],f=0;f<b;f++)e.push(f);return d.mapSeries(e,a,c)};d.compose=function(){var b=Array.prototype.reverse.call(arguments);return function(){var a=this,c=Array.prototype.slice.call(arguments),e=c.pop();d.reduce(b,c,function(b,c,d){c.apply(a,b.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(b,c){e.apply(a,[b].concat(c))})}};g=function(b,a){var c=
function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return b(a,function(a,b){a.apply(c,d.concat([b]))},e)};if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};d.applyEach=p(g);d.applyEachSeries=q(g);d.forever=function(b,a){function c(d){if(d){if(a)return a(d);throw d;}b(c)}c()};"undefined"!==typeof define&&define.amd?define([],function(){return d}):"undefined"!==typeof module&&module.exports?module.exports=d:m.async=d})();
